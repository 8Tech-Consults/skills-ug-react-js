import{r as i,G as V,j as e,x as u,aa as S,X as _,U as p}from"./index-CZ4Ss9bE.js";import{C as F}from"./CvModel-DXJAS_hU.js";import{JobSkeleton as R}from"./JobDetailPage-DYhvMWxA.js";import"./index-BIYPkXoP.js";const L={search:"",experienceMin:void 0,experienceMax:void 0,educationLevel:"",skills:""},G=["High School","Bachelor's Degree","Master's Degree","PhD"],N={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10}},T=()=>{const[m,M]=i.useState([]),[h,v]=i.useState(!1),[t,c]=i.useState(L),[n,r]=i.useState(1),[d,$]=i.useState(1),[o,g]=i.useState(!0),[l,P]=i.useState(null),[E,x]=i.useState(!1);i.useEffect(()=>{y(n,t)},[n,t]);const y=async(s,a)=>{var C,k;try{v(!0);const w={search:a.search,experienceMin:((C=a.experienceMin)==null?void 0:C.toString())||"",experienceMax:((k=a.experienceMax)==null?void 0:k.toString())||"",educationLevel:a.educationLevel||"",skills:a.skills||""},b=await F.fetchJobs(s,w);M(b.data),r(b.current_page),$(b.last_page)}catch{V.error("Failed to load CV bank data.")}finally{v(!1)}},A=s=>{s.preventDefault(),r(1),y(1,t)},D=()=>{c(L),r(1)},j=s=>{s>=1&&s<=d&&r(s)},f=s=>{P(s),x(!0)};return h?R():e.jsxs(u.div,{className:"container py-4 px-0 px-md-12",variants:N,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-0",children:[e.jsxs("ol",{className:"breadcrumb breadcrumb-item text-muted fs-6 fw-bold mb-5 mx-0 mt-2",children:[e.jsx("li",{className:"breadcrumb-item pe-3",children:e.jsx(S,{to:"/",className:"active text-decoration-none",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item px-3 text-muted",children:"CV Bank"})]}),e.jsxs("div",{className:"d-flex gap-2 mb-2",children:[e.jsxs("button",{className:`btn  btn-outline-secondary ${o?"active":""}`,onClick:()=>g(!0),children:[e.jsx("i",{className:"bi bi-grid-fill"})," Grid"]}),e.jsxs("button",{className:`btn btn-outline-secondary ${o?"":"active"}`,onClick:()=>g(!1),children:[e.jsx("i",{className:"bi bi-list-task"})," Table"]})]})]}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx("div",{className:"card shadow-sm h-100",children:e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Search by Name/Email"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter keywords...",value:t.search,onChange:s=>c(a=>({...a,search:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Experience Range (years)"}),e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Min",min:"0",value:t.experienceMin||"",onChange:s=>c(a=>({...a,experienceMin:Number(s.target.value)}))})}),e.jsx("div",{className:"col",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Max",min:"0",value:t.experienceMax||"",onChange:s=>c(a=>({...a,experienceMax:Number(s.target.value)}))})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Education Level"}),e.jsxs("select",{className:"form-select",value:t.educationLevel,onChange:s=>c(a=>({...a,educationLevel:s.target.value})),children:[e.jsx("option",{value:"",children:"All Education Levels"}),G.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label",children:"Skills"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"e.g., JavaScript, React, Python",value:t.skills,onChange:s=>c(a=>({...a,skills:s.target.value}))}),e.jsx("div",{className:"form-text",children:"Separate skills with commas"})]}),e.jsxs("div",{className:"d-grid gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx("i",{className:"bi bi-funnel me-2"}),"Apply Filters"]}),e.jsxs("button",{type:"button",className:"btn btn-outline-danger",onClick:D,children:[e.jsx("i",{className:"bi bi-arrow-counterclockwise me-2"}),"Reset Filters"]})]})]})})})}),e.jsxs("div",{className:"col-lg-9",children:[h?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):m.length===0?e.jsx("div",{className:"alert alert-warning",children:"No matching candidates found."}):e.jsx(_,{mode:"wait",children:e.jsx(u.div,{variants:N,initial:"hidden",animate:"visible",exit:"exit",children:o?e.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4",children:m.map(s=>e.jsx("div",{className:"col",children:e.jsx("div",{className:"card h-100 shadow-sm",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"d-flex justify-content-center mb-3",children:s.avatar?e.jsx("img",{src:p.img(s.avatar),alt:"Avatar",className:"rounded-circle",style:{width:"100px",height:"100px",objectFit:"cover"}}):e.jsx("div",{className:"rounded-circle",style:{width:"100px",height:"100px",backgroundColor:"#dee2e6"}})}),e.jsx("h5",{className:"card-title mb-2",children:s.name||`${s.first_name} ${s.last_name}`}),e.jsxs("div",{className:"text-muted small mb-3",children:[e.jsx("div",{children:s.email}),e.jsx("div",{children:s.phone_number_1||s.phone_number_2})]}),e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>f(s),children:"View Details"})]})})},s.id))}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Avatar"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:m.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1+(n-1)*10}),e.jsx("td",{children:s.avatar?e.jsx("img",{src:p.img(s.avatar),alt:"Avatar",className:"rounded-circle",style:{width:"40px",height:"40px"}}):e.jsx("div",{className:"rounded-circle",style:{width:"40px",height:"40px",backgroundColor:"#dee2e6"}})}),e.jsx("td",{children:s.name||`${s.first_name} ${s.last_name}`}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.phone_number_1||s.phone_number_2}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>f(s),children:"Details"})})]},s.id))})]})})},o?"grid":"table")}),!h&&d>1&&e.jsx("nav",{className:"mt-4",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${n===1?"disabled":""}`,onClick:()=>j(n-1),children:e.jsx("button",{className:"page-link",children:"Previous"})}),Array.from({length:d},(s,a)=>a+1).map(s=>e.jsx("li",{className:`page-item ${s===n?"active":""}`,onClick:()=>j(s),children:e.jsx("button",{className:"page-link",children:s})},s)),e.jsx("li",{className:`page-item ${n===d?"disabled":""}`,onClick:()=>j(n+1),children:e.jsx("button",{className:"page-link",children:"Next"})})]})})]})]}),e.jsx(_,{children:E&&l&&e.jsx(u.div,{className:"modal fade show d-block",tabIndex:-1,variants:N,initial:"hidden",animate:"visible",exit:"exit",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:l.name||`${l.first_name} ${l.last_name}`}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>x(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 text-center",children:[l.avatar?e.jsx("img",{src:p.img(l.avatar),alt:"Avatar",className:"img-fluid rounded-circle mb-3",style:{width:"150px",height:"150px"}}):e.jsx("div",{className:"rounded-circle bg-secondary mb-3",style:{width:"150px",height:"150px",margin:"0 auto"}}),e.jsx("h5",{children:"Contact Information"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Email:"})," ",l.email]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Phone:"})," ",l.phone_number_1||l.phone_number_2]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Location:"})," ",l.current_address]})]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("h5",{children:"Professional Details"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{children:"Objective"}),e.jsx("p",{children:l.objective||"Not specified"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{children:"Career Summary"}),e.jsx("p",{children:l.career_summary||"Not specified"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{children:"Special Qualifications"}),e.jsx("p",{children:l.special_qualification||"None provided"})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(S,{to:`/cv-bank/${l.id}`,className:"btn btn-primary",children:"View Complete Cv"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>x(!1),children:"Close"})]})]})})})})]})};export{T as default};
