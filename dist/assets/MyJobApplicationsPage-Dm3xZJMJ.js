import{r,z as D,j as e,ac as F,ad as B,ae as E,H as L,ai as O,ap as f,aj as H,aq as z,p as g,ak as V,al as S,am as q,R as C,an as u,_ as G,Q as x,ar as Q}from"./index-yHgIsLNf.js";import{M as U}from"./MyJonApplicationModel-ej5flmDR.js";const W={},k=C.memo(({status:a})=>{let s="bg-secondary";switch(a){case"Pending":s="bg-warning";break;case"Interview":s="bg-info";break;case"Hired":s="bg-success";break;case"Declined":s="bg-danger";break}return e.jsx(Q,{className:s,children:a})});k.displayName="StatusBadge";const A=C.memo(({app:a,idx:s,currentPage:i,onViewDetails:c})=>{var t;return e.jsxs("tr",{children:[e.jsx("td",{children:(i-1)*10+(s+1)}),e.jsx("td",{children:a.job_text||a.job_id}),e.jsx("td",{children:e.jsx(k,{status:a.status})}),e.jsx("td",{children:((t=a.created_at)==null?void 0:t.split("T")[0])||"N/A"}),e.jsx("td",{children:a.interview_scheduled_at?a.interview_scheduled_at.split("T")[0]:"N/A"}),e.jsx("td",{children:e.jsx(g,{variant:"outline-primary",size:"sm",onClick:()=>c(a),children:"View"})})]},a.id)});A.displayName="JobApplicationRow";const Y=({showModal:a,selectedApp:s,onCloseModal:i})=>{var c;return s?e.jsxs(x,{show:a,onHide:i,size:"lg",centered:!0,children:[e.jsx(x.Header,{closeButton:!0,children:e.jsxs(x.Title,{children:["Application for: ",s.job_text||s.job_id]})}),e.jsxs(x.Body,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Applied On:"})," ",(c=s.created_at)==null?void 0:c.split("T")[0]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Applicant Message:"})," ",e.jsx("br",{})," ",s.applicant_message||"No message"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Attachments:"})," ",s.attachments||"None"]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Employer Message:"})," ",e.jsx("br",{})," ",s.employer_message||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Decline Reason:"})," ",s.decline_reason||"N/A"]})]})]}),e.jsx("hr",{}),e.jsx("h6",{children:"Interview Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Scheduled At:"})," ",s.interview_scheduled_at?s.interview_scheduled_at.split("T")[0]:"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",s.interview_location||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.interview_type||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Result:"})," ",s.interview_result||"Pending"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewer Notes:"})," ",s.interviewer_notes||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewer Rating:"})," ",s.interviewer_rating||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewee Feedback:"})," ",s.interviewee_feedback||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewee Rating:"})," ",s.interviewee_rating||"N/A"]}),e.jsx("hr",{}),e.jsx("h6",{children:"Onboarding"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contract URL:"})," ",s.contract_url||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Onboarding Start:"})," ",s.onboarding_start_date||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Onboarding Notes:"})," ",s.onboarding_notes||"N/A"]})]}),e.jsx(x.Footer,{children:e.jsx(g,{variant:"secondary",onClick:i,children:"Close"})})]}):null},Z=()=>{const[a,s]=r.useState([]),[i,c]=r.useState(!1),[t,N]=r.useState(""),[l,b]=r.useState(1),[d,M]=r.useState(1),[h,T]=r.useState(""),[y,_]=r.useState(!1),[w,J]=r.useState(null),j=r.useCallback(async(n,o)=>{c(!0),N("");try{const m={};o&&(m.search=o);const p=await U.fetchJobs(n,m);s(p.data),b(p.current_page),M(p.last_page)}catch(m){console.error(m),N("Failed to load job applications."),D.error("Error loading applications.")}finally{c(!1)}},[]);r.useEffect(()=>{j(l,h)},[l,h,j]);const I=r.useCallback(n=>{n.preventDefault(),b(1),j(1,h)},[h,j]),v=r.useCallback(n=>{n>=1&&n<=d&&b(n)},[d]),P=r.useCallback(n=>{J(n),_(!0)},[]),R=r.useCallback(()=>{_(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(F,{breadcrumbs:[{title:"Jobs",path:"/admin/jobs",isActive:!1}],children:"My Job Applications"}),e.jsx(B,{}),e.jsx(E,{children:e.jsx(L.div,{className:"container-fluid py-4 card shadow-sm",variants:W,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"card-body",children:[e.jsx(O,{className:"mb-4",onSubmit:I,children:e.jsxs(f,{children:[e.jsx(f.Text,{children:e.jsx(H,{})}),e.jsx(z,{type:"text",placeholder:"Search applications...",value:h,onChange:n=>T(n.target.value)}),e.jsx(g,{variant:"primary",type:"submit",children:"Search"})]})}),i&&e.jsx("div",{className:"text-center py-5",children:e.jsx(V,{animation:"border",variant:"primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!i&&t&&e.jsx(S,{variant:"danger",role:"alert",children:t}),!i&&!t&&a.length===0&&e.jsx("div",{className:"d-flex flex-column align-items-center justify-content-center py-5",children:e.jsxs(S,{variant:"info",className:"text-center w-50",children:[e.jsx("h4",{children:"No Job Applications Found"}),e.jsx("p",{className:"mb-4",children:"You haven't applied for any jobs yet."}),e.jsx(g,{href:"/jobs",as:"a",variant:"primary",children:"Browse Jobs"})]})}),!i&&!t&&a.length>0&&e.jsx("div",{className:"table-responsive",children:e.jsxs(q,{striped:!0,hover:!0,className:"align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Job"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Applied On"}),e.jsx("th",{children:"Interview Date"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a.map((n,o)=>e.jsx(A,{app:n,idx:o,currentPage:l,onViewDetails:P},n.id))})]})}),!i&&!t&&d>1&&e.jsxs(u,{className:"mt-4 justify-content-center",children:[e.jsx(u.Prev,{onClick:()=>v(l-1),disabled:l<=1}),Array.from({length:d},(n,o)=>o+1).map(n=>e.jsx(u.Item,{active:n===l,onClick:()=>v(n),children:n},n)),e.jsx(u.Next,{onClick:()=>v(l+1),disabled:l>=d})]}),e.jsx(G,{children:y&&w&&e.jsx(Y,{showModal:y,selectedApp:w,onCloseModal:R})})]})})})]})};export{Z as default};
