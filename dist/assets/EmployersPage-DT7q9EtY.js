import{r as n,G as V,j as e,x as j,Q as S,U as b,a7 as D}from"./index-Cset_lPn.js";import{C as $}from"./CvModel-bKdyd4X9.js";import{JobSkeleton as O}from"./JobDetailPage-B1F4IL2u.js";import"./index-cTMbjTb9.js";const M={search:"",industry:"",employeesMin:void 0,employeesMax:void 0,establishedAfter:void 0,certifications:""},T=["Technology","Finance","Healthcare","Manufacturing","Retail","Education","Construction","Transportation"],N={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10}},J=()=>{const[m,F]=n.useState([]),[h,g]=n.useState(!1),[i,r]=n.useState(M),[c,t]=n.useState(1),[d,A]=n.useState(1),[o,y]=n.useState(!0),[l,E]=n.useState(null),[I,x]=n.useState(!1);n.useEffect(()=>{v(c,i)},[c,i]);const v=async(s,a)=>{var _,w,C;try{g(!0);const k={search:a.search,industry:a.industry||"",employeesMin:((_=a.employeesMin)==null?void 0:_.toString())||"",employeesMax:((w=a.employeesMax)==null?void 0:w.toString())||"",establishedAfter:((C=a.establishedAfter)==null?void 0:C.toString())||"",certifications:a.certifications||"",is_company:"true"},u=await $.fetchJobs(s,k);F(u.data),t(u.current_page),A(u.last_page)}catch{V.error("Failed to load company data.")}finally{g(!1)}},L=s=>{s.preventDefault(),t(1),v(1,i)},P=()=>{r(M),t(1)},p=s=>{s>=1&&s<=d&&t(s)},f=s=>{E(s),x(!0)};return h?O():e.jsxs(j.div,{className:"container py-4 px-0 px-md-3 px-lg-10",variants:N,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx("div",{className:"card shadow-lg h-100 border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"mb-4 text-primary",children:"🔍 Find Employers"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Search Companies"}),e.jsx("input",{type:"text",className:"form-control rounded-pill",placeholder:"Company name or industry...",value:i.search,onChange:s=>r(a=>({...a,search:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Industry Sector"}),e.jsxs("select",{className:"form-select rounded-pill",value:i.industry,onChange:s=>r(a=>({...a,industry:s.target.value})),children:[e.jsx("option",{value:"",children:"All Industries"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Company Size"}),e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"number",className:"form-control rounded-pill",placeholder:"Min employees",min:"0",value:i.employeesMin||"",onChange:s=>r(a=>({...a,employeesMin:Number(s.target.value)}))})}),e.jsx("div",{className:"col",children:e.jsx("input",{type:"number",className:"form-control rounded-pill",placeholder:"Max employees",min:"0",value:i.employeesMax||"",onChange:s=>r(a=>({...a,employeesMax:Number(s.target.value)}))})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Established After"}),e.jsx("input",{type:"number",className:"form-control rounded-pill",placeholder:"Year",min:"1900",max:new Date().getFullYear(),value:i.establishedAfter||"",onChange:s=>r(a=>({...a,establishedAfter:Number(s.target.value)}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label fw-bold",children:"Certifications"}),e.jsx("input",{type:"text",className:"form-control rounded-pill",placeholder:"ISO, OSHA, etc.",value:i.certifications,onChange:s=>r(a=>({...a,certifications:s.target.value}))})]}),e.jsxs("div",{className:"d-grid gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-primary rounded-pill",children:"🚀 Apply Filters"}),e.jsx("button",{type:"button",className:"btn btn-outline-danger rounded-pill",onClick:P,children:"🔄 Reset Filters"})]})]})]})})}),e.jsxs("div",{className:"col-lg-9",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h1",{className:"display-6 text-dark mb-0",children:"Featured Employers"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:`btn btn-lg ${o?"btn-primary":"btn-outline-primary"} rounded-pill`,onClick:()=>y(!0),children:[e.jsx("i",{className:"bi bi-grid-3x3"})," Grid"]}),e.jsxs("button",{className:`btn btn-lg ${o?"btn-outline-primary":"btn-primary"} rounded-pill`,onClick:()=>y(!1),children:[e.jsx("i",{className:"bi bi-list-ul"})," List"]})]})]}),h?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):m.length===0?e.jsxs("div",{className:"alert alert-info rounded-3",children:[e.jsx("h4",{className:"alert-heading",children:"No Companies Found"}),e.jsx("p",{children:"Try adjusting your filters or search terms"})]}):e.jsx(S,{mode:"wait",children:e.jsx(j.div,{variants:N,initial:"hidden",animate:"visible",exit:"exit",children:o?e.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4",children:m.map(s=>e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card h-100 shadow-lg border-0 hover-scale",children:[e.jsx("div",{className:"card-header bg-transparent",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("img",{src:b.img(s.company_logo||"default-company.png"),alt:"Company logo",className:"rounded-circle",style:{width:"60px",height:"60px",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"h5 mb-0",children:s.company_name}),e.jsx("div",{className:"text-muted small",children:s.company_main_category_id})]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex gap-2 flex-wrap mb-3",children:[e.jsxs("span",{className:"badge bg-primary rounded-pill",children:["📅 Est. ",s.company_year_of_establishment]}),e.jsxs("span",{className:"badge bg-success rounded-pill",children:["👥 ",s.company_employees_range]}),e.jsxs("span",{className:"badge bg-info rounded-pill",children:["📍 ",s.company_country]})]}),e.jsx("p",{className:"text-truncate-3",children:s.company_description})]}),e.jsx("div",{className:"card-footer bg-transparent",children:e.jsx("button",{className:"btn btn-outline-primary w-100 rounded-pill",onClick:()=>f(s),children:"View Company Profile"})})]})},s.id))}):e.jsx("div",{className:"table-responsive rounded-3 shadow-sm",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Company"}),e.jsx("th",{children:"Industry"}),e.jsx("th",{children:"Employees"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Established"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{className:"cursor-pointer",children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("img",{src:b.img(s.company_logo||"default-company.png"),alt:"Company logo",className:"rounded-circle",style:{width:"45px",height:"45px"}}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:s.company_name}),e.jsx("div",{className:"text-muted small",children:s.company_sub_category_id})]})]})}),e.jsx("td",{children:s.company_main_category_id}),e.jsx("td",{children:s.company_employees_range}),e.jsx("td",{children:s.company_country}),e.jsx("td",{children:s.company_year_of_establishment}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:()=>f(s),children:"View Details"})})]},s.id))})]})})},o?"grid":"list")}),!h&&d>1&&e.jsx("nav",{className:"mt-5",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${c===1?"disabled":""}`,children:e.jsx("button",{className:"page-link rounded-pill mx-1",onClick:()=>p(c-1),children:"« Previous"})}),Array.from({length:d},(s,a)=>e.jsx("li",{className:`page-item ${c===a+1?"active":""}`,children:e.jsx("button",{className:"page-link rounded-circle mx-1",onClick:()=>p(a+1),children:a+1})},a+1)),e.jsx("li",{className:`page-item ${c===d?"disabled":""}`,children:e.jsx("button",{className:"page-link rounded-pill mx-1",onClick:()=>p(c+1),children:"Next »"})})]})})]})]}),e.jsx(S,{children:I&&l&&e.jsx(j.div,{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},variants:N,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:e.jsxs("div",{className:"modal-content rounded-3",children:[e.jsxs("div",{className:"modal-header bg-primary text-white",children:[e.jsx("h2",{className:"modal-title",children:l.company_name}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>x(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 border-end",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("img",{src:b.img(l.company_logo||"default-company.png"),alt:"Company logo",className:"img-fluid rounded-3",style:{maxWidth:"200px"}})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"h5",children:"📌 Quick Facts"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Industry:"})," ",l.company_main_category_id]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Founded:"})," ",l.company_year_of_establishment]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Employees:"})," ",l.company_employees_range]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Location:"})," ",l.company_address]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Certifications:"})," ",l.company_certifications||"N/A"]})]})]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("h3",{className:"h4 mb-3",children:"🏢 About Us"}),e.jsx("p",{className:"lead",children:l.company_description}),e.jsxs("div",{className:"row g-3 mt-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card h-100 border-0 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"🌐 Online Presence"}),e.jsxs("div",{className:"list-group list-group-flush",children:[l.company_website_url&&e.jsxs("a",{href:l.company_website_url,className:"list-group-item list-group-item-action",children:[e.jsx("i",{className:"bi bi-globe me-2"}),"Website"]}),l.company_facebook_url&&e.jsxs("a",{href:l.company_facebook_url,className:"list-group-item list-group-item-action",children:[e.jsx("i",{className:"bi bi-facebook me-2"}),"Facebook"]}),l.company_linkedin_url&&e.jsxs("a",{href:l.company_linkedin_url,className:"list-group-item list-group-item-action",children:[e.jsx("i",{className:"bi bi-linkedin me-2"}),"LinkedIn"]})]})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card h-100 border-0 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"📜 Business Details"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"License:"})," ",l.company_trade_license_no]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Tax ID:"})," ",l.company_tax_id]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Ownership:"})," ",l.company_ownership_type]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("strong",{children:"Operating Hours:"})," ",l.company_operating_hours]})]})]})})})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-outline-secondary rounded-pill",onClick:()=>x(!1),children:"Close"}),e.jsx(D,{to:`/companies/${l.id}`,className:"btn btn-primary rounded-pill",children:"View Full Profile"})]})]})})})})]})};export{J as default};
