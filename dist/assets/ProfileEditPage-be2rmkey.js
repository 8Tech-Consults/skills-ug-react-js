var Bs=Object.defineProperty;var qs=(a,s,t)=>s in a?Bs(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var ye=(a,s,t)=>qs(a,typeof s!="symbol"?s+"":s,t);import{R as V,r as i,j as e,T as Hs,t as Fs,c as I,s as Be,E as Ls,a as Js,b as Ys,d as zs,e as Ks,u as O,f as ae,g as ze,h as Us,i as Ke,k as Ws,l as Gs,q as qe,m as Vs,n as Ue,o as Xs,p as Qs,v as U,w as k,x as j,F as K,y as pe,M as T,z as W,A as c,S as z,B as b,C as he,D as Z,G as R,H as xe,P as ne,U as te,I as oe,J as fe,K as ce,L as de,N as je,O as ge,Q as Zs,V as ea,W as sa,X as me,Y as Ae,Z as aa,_ as X,$ as He,a0 as ta,a1 as na,a2 as la,a3 as ia,a4 as ra,a5 as Fe,a6 as oa,a7 as se,a8 as ca,a9 as da,aa as le,ab as ma,ac as ie}from"./index-B_eXsex6.js";import{u as We,a as ua,m as pa,b as ha}from"./mergeOptionsWithPopperConfig-D9tQefOG.js";function re(...a){return a.filter(s=>s!=null).reduce((s,t)=>{if(typeof t!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return s===null?t:function(...l){s.apply(this,l),t.apply(this,l)}},null)}const xa={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function fa(a,s){const t=`offset${a[0].toUpperCase()}${a.slice(1)}`,n=s[t],l=xa[a];return n+parseInt(Be(s,l[0]),10)+parseInt(Be(s,l[1]),10)}const ja={[Ls]:"collapse",[Js]:"collapsing",[Ys]:"collapsing",[zs]:"collapse show"},ba=V.forwardRef(({onEnter:a,onEntering:s,onEntered:t,onExit:n,onExiting:l,className:r,children:o,dimension:d="height",in:u=!1,timeout:p=300,mountOnEnter:x=!1,unmountOnExit:f=!1,appear:h=!1,getDimensionValue:v=fa,...S},D)=>{const y=typeof d=="function"?d():d,_=i.useMemo(()=>re(N=>{N.style[y]="0"},a),[y,a]),$=i.useMemo(()=>re(N=>{const m=`scroll${y[0].toUpperCase()}${y.slice(1)}`;N.style[y]=`${N[m]}px`},s),[y,s]),A=i.useMemo(()=>re(N=>{N.style[y]=null},t),[y,t]),w=i.useMemo(()=>re(N=>{N.style[y]=`${v(y,N)}px`,Ks(N)},n),[n,v,y]),g=i.useMemo(()=>re(N=>{N.style[y]=null},l),[y,l]);return e.jsx(Hs,{ref:D,addEndListener:Fs,...S,"aria-expanded":S.role?u:null,onEnter:_,onEntering:$,onEntered:A,onExit:w,onExiting:g,childRef:o.ref,in:u,timeout:p,mountOnEnter:x,unmountOnExit:f,appear:h,children:(N,m)=>V.cloneElement(o,{...m,className:I(r,o.props.className,ja[N],y==="width"&&"collapse-horizontal")})})});function Ge(a,s){return Array.isArray(a)?a.includes(s):a===s}const be=i.createContext({});be.displayName="AccordionContext";const De=i.forwardRef(({as:a="div",bsPrefix:s,className:t,children:n,eventKey:l,...r},o)=>{const{activeEventKey:d}=i.useContext(be);return s=O(s,"accordion-collapse"),e.jsx(ba,{ref:o,in:Ge(d,l),...r,className:I(t,s),children:e.jsx(a,{children:i.Children.only(n)})})});De.displayName="AccordionCollapse";const we=i.createContext({eventKey:""});we.displayName="AccordionItemContext";const Ve=i.forwardRef(({as:a="div",bsPrefix:s,className:t,onEnter:n,onEntering:l,onEntered:r,onExit:o,onExiting:d,onExited:u,...p},x)=>{s=O(s,"accordion-body");const{eventKey:f}=i.useContext(we);return e.jsx(De,{eventKey:f,onEnter:n,onEntering:l,onEntered:r,onExit:o,onExiting:d,onExited:u,children:e.jsx(a,{ref:x,...p,className:I(t,s)})})});Ve.displayName="AccordionBody";function va(a,s){const{activeEventKey:t,onSelect:n,alwaysOpen:l}=i.useContext(be);return r=>{let o=a===t?null:a;l&&(Array.isArray(t)?t.includes(a)?o=t.filter(d=>d!==a):o=[...t,a]:o=[a]),n==null||n(o,r),s==null||s(r)}}const $e=i.forwardRef(({as:a="button",bsPrefix:s,className:t,onClick:n,...l},r)=>{s=O(s,"accordion-button");const{eventKey:o}=i.useContext(we),d=va(o,n),{activeEventKey:u}=i.useContext(be);return a==="button"&&(l.type="button"),e.jsx(a,{ref:r,onClick:d,...l,"aria-expanded":Array.isArray(u)?u.includes(o):o===u,className:I(t,s,!Ge(u,o)&&"collapsed")})});$e.displayName="AccordionButton";const Xe=i.forwardRef(({as:a="h2",bsPrefix:s,className:t,children:n,onClick:l,...r},o)=>(s=O(s,"accordion-header"),e.jsx(a,{ref:o,...r,className:I(t,s),children:e.jsx($e,{onClick:l,children:n})})));Xe.displayName="AccordionHeader";const Qe=i.forwardRef(({as:a="div",bsPrefix:s,className:t,eventKey:n,...l},r)=>{s=O(s,"accordion-item");const o=i.useMemo(()=>({eventKey:n}),[n]);return e.jsx(we.Provider,{value:o,children:e.jsx(a,{ref:r,...l,className:I(t,s)})})});Qe.displayName="AccordionItem";const Ze=i.forwardRef((a,s)=>{const{as:t="div",activeKey:n,bsPrefix:l,className:r,onSelect:o,flush:d,alwaysOpen:u,...p}=We(a,{activeKey:"onSelect"}),x=O(l,"accordion"),f=i.useMemo(()=>({activeEventKey:n,onSelect:o,alwaysOpen:u}),[n,o,u]);return e.jsx(be.Provider,{value:f,children:e.jsx(t,{ref:s,...p,className:I(r,x,d&&`${x}-flush`)})})});Ze.displayName="Accordion";const Q=Object.assign(Ze,{Button:$e,Collapse:De,Item:Qe,Header:Xe,Body:Ve});function ya(a,s,t,n=!1){const l=ae(t);i.useEffect(()=>{const r=typeof a=="function"?a():a;return r.addEventListener(s,l,n),()=>r.removeEventListener(s,l,n)},[a])}const Na=["as","disabled"];function ga(a,s){if(a==null)return{};var t={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(s.indexOf(n)>=0)continue;t[n]=a[n]}return t}function wa(a){return!a||a.trim()==="#"}function Pe({tagName:a,disabled:s,href:t,target:n,rel:l,role:r,onClick:o,tabIndex:d=0,type:u}){a||(t!=null||n!=null||l!=null?a="a":a="button");const p={tagName:a};if(a==="button")return[{type:u||"button",disabled:s},p];const x=h=>{if((s||a==="a"&&wa(t))&&h.preventDefault(),s){h.stopPropagation();return}o==null||o(h)},f=h=>{h.key===" "&&(h.preventDefault(),x(h))};return a==="a"&&(t||(t="#"),s&&(t=void 0)),[{role:r??"button",disabled:void 0,tabIndex:s?void 0:d,href:t,target:a==="a"?n:void 0,"aria-disabled":s||void 0,rel:a==="a"?l:void 0,onClick:x,onKeyDown:f},p]}const es=i.forwardRef((a,s)=>{let{as:t,disabled:n}=a,l=ga(a,Na);const[r,{tagName:o}]=Pe(Object.assign({tagName:t,disabled:n},l));return e.jsx(o,Object.assign({},l,r,{ref:s}))});es.displayName="Button";const Ca=["onKeyDown"];function Sa(a,s){if(a==null)return{};var t={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(s.indexOf(n)>=0)continue;t[n]=a[n]}return t}function ka(a){return!a||a.trim()==="#"}const ss=i.forwardRef((a,s)=>{let{onKeyDown:t}=a,n=Sa(a,Ca);const[l]=Pe(Object.assign({tagName:"a"},n)),r=ae(o=>{l.onKeyDown(o),t==null||t(o)});return ka(n.href)||n.role==="button"?e.jsx("a",Object.assign({ref:s},n,l,{onKeyDown:r})):e.jsx("a",Object.assign({ref:s},n,{onKeyDown:t}))});ss.displayName="Anchor";const P=i.forwardRef(({as:a,bsPrefix:s,variant:t="primary",size:n,active:l=!1,disabled:r=!1,className:o,...d},u)=>{const p=O(s,"btn"),[x,{tagName:f}]=Pe({tagName:a,disabled:r,...d}),h=f;return e.jsx(h,{...x,...d,ref:u,disabled:r,className:I(o,p,l&&"active",t&&`${p}-${t}`,n&&`${p}-${n}`,d.href&&r&&"disabled")})});P.displayName="Button";const Ie=i.forwardRef(({className:a,bsPrefix:s,as:t="div",...n},l)=>(s=O(s,"card-body"),e.jsx(t,{ref:l,className:I(a,s),...n})));Ie.displayName="CardBody";const as=i.forwardRef(({className:a,bsPrefix:s,as:t="div",...n},l)=>(s=O(s,"card-footer"),e.jsx(t,{ref:l,className:I(a,s),...n})));as.displayName="CardFooter";const ts=i.createContext(null);ts.displayName="CardHeaderContext";const ns=i.forwardRef(({bsPrefix:a,className:s,as:t="div",...n},l)=>{const r=O(a,"card-header"),o=i.useMemo(()=>({cardHeaderBsPrefix:r}),[r]);return e.jsx(ts.Provider,{value:o,children:e.jsx(t,{ref:l,...n,className:I(s,r)})})});ns.displayName="CardHeader";const ls=i.forwardRef(({bsPrefix:a,className:s,variant:t,as:n="img",...l},r)=>{const o=O(a,"card-img");return e.jsx(n,{ref:r,className:I(t?`${o}-${t}`:o,s),...l})});ls.displayName="CardImg";const is=i.forwardRef(({className:a,bsPrefix:s,as:t="div",...n},l)=>(s=O(s,"card-img-overlay"),e.jsx(t,{ref:l,className:I(a,s),...n})));is.displayName="CardImgOverlay";const rs=i.forwardRef(({className:a,bsPrefix:s,as:t="a",...n},l)=>(s=O(s,"card-link"),e.jsx(t,{ref:l,className:I(a,s),...n})));rs.displayName="CardLink";const Ea=ze("h6"),os=i.forwardRef(({className:a,bsPrefix:s,as:t=Ea,...n},l)=>(s=O(s,"card-subtitle"),e.jsx(t,{ref:l,className:I(a,s),...n})));os.displayName="CardSubtitle";const cs=i.forwardRef(({className:a,bsPrefix:s,as:t="p",...n},l)=>(s=O(s,"card-text"),e.jsx(t,{ref:l,className:I(a,s),...n})));cs.displayName="CardText";const Aa=ze("h5"),ds=i.forwardRef(({className:a,bsPrefix:s,as:t=Aa,...n},l)=>(s=O(s,"card-title"),e.jsx(t,{ref:l,className:I(a,s),...n})));ds.displayName="CardTitle";const ms=i.forwardRef(({bsPrefix:a,className:s,bg:t,text:n,border:l,body:r=!1,children:o,as:d="div",...u},p)=>{const x=O(a,"card");return e.jsx(d,{ref:p,...u,className:I(s,x,t&&`bg-${t}`,n&&`text-${n}`,l&&`border-${l}`),children:r?e.jsx(Ie,{children:o}):o})});ms.displayName="Card";const L=Object.assign(ms,{Img:ls,Title:ds,Subtitle:os,Body:Ie,Link:rs,Text:cs,Header:ns,Footer:as,ImgOverlay:is}),_e=i.forwardRef(({bsPrefix:a,fluid:s=!1,as:t="div",className:n,...l},r)=>{const o=O(a,"container"),d=typeof s=="string"?`-${s}`:"-fluid";return e.jsx(t,{ref:r,...l,className:I(n,s?`${o}${d}`:o)})});_e.displayName="Container";function Da(a,s,t){const n=i.useRef(a!==void 0),[l,r]=i.useState(s),o=a!==void 0,d=n.current;return n.current=o,!o&&d&&l!==s&&r(s),[o?a:l,i.useCallback((...u)=>{const[p,...x]=u;let f=t==null?void 0:t(p,...x);return r(p),f},[t])]}function $a(){const[,a]=i.useReducer(s=>!s,!1);return a}const Ce=i.createContext(null),Pa=["children","usePopper"];function Ia(a,s){if(a==null)return{};var t={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(s.indexOf(n)>=0)continue;t[n]=a[n]}return t}const _a=()=>{};function us(a={}){const s=i.useContext(Ce),[t,n]=Us(),l=i.useRef(!1),{flip:r,offset:o,rootCloseEvent:d,fixed:u=!1,placement:p,popperConfig:x={},enableEventListeners:f=!0,usePopper:h=!!s}=a,v=(s==null?void 0:s.show)==null?!!a.show:s.show;v&&!l.current&&(l.current=!0);const S=N=>{s==null||s.toggle(!1,N)},{placement:D,setMenu:y,menuElement:_,toggleElement:$}=s||{},A=ua($,_,pa({placement:p||D||"bottom-start",enabled:h,enableEvents:f??v,offset:o,flip:r,fixed:u,arrowElement:t,popperConfig:x})),w=Object.assign({ref:y||_a,"aria-labelledby":$==null?void 0:$.id},A.attributes.popper,{style:A.styles.popper}),g={show:v,placement:D,hasShown:l.current,toggle:s==null?void 0:s.toggle,popper:h?A:null,arrowProps:h?Object.assign({ref:n},A.attributes.arrow,{style:A.styles.arrow}):{}};return ha(_,S,{clickTrigger:d,disabled:!v}),[w,g]}function ps(a){let{children:s,usePopper:t=!0}=a,n=Ia(a,Pa);const[l,r]=us(Object.assign({},n,{usePopper:t}));return e.jsx(e.Fragment,{children:s(l,r)})}ps.displayName="DropdownMenu";const Ne={prefix:String(Math.round(Math.random()*1e10)),current:0},hs=V.createContext(Ne),Ta=V.createContext(!1);let Ma=!!(typeof window<"u"&&window.document&&window.document.createElement),ke=new WeakMap;function Oa(a=!1){let s=i.useContext(hs),t=i.useRef(null);if(t.current===null&&!a){var n,l;let r=(l=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||l===void 0||(n=l.ReactCurrentOwner)===null||n===void 0?void 0:n.current;if(r){let o=ke.get(r);o==null?ke.set(r,{id:s.current,state:r.memoizedState}):r.memoizedState!==o.state&&(s.current=o.id,ke.delete(r))}t.current=++s.current}return t.current}function Ra(a){let s=i.useContext(hs);s===Ne&&!Ma&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let t=Oa(!!a),n=`react-aria${s.prefix}`;return a||`${n}-${t}`}function Ba(a){let s=V.useId(),[t]=i.useState(Ja()),n=t?"react-aria":`react-aria${Ne.prefix}`;return a||`${n}-${s}`}const qa=typeof V.useId=="function"?Ba:Ra;function Ha(){return!1}function Fa(){return!0}function La(a){return()=>{}}function Ja(){return typeof V.useSyncExternalStore=="function"?V.useSyncExternalStore(La,Ha,Fa):i.useContext(Ta)}const xs=a=>{var s;return((s=a.getAttribute("role"))==null?void 0:s.toLowerCase())==="menu"},Le=()=>{};function fs(){const a=qa(),{show:s=!1,toggle:t=Le,setToggle:n,menuElement:l}=i.useContext(Ce)||{},r=i.useCallback(d=>{t(!s,d)},[s,t]),o={id:a,ref:n||Le,onClick:r,"aria-expanded":!!s};return l&&xs(l)&&(o["aria-haspopup"]=!0),[o,{show:s,toggle:t}]}function js({children:a}){const[s,t]=fs();return e.jsx(e.Fragment,{children:a(s,t)})}js.displayName="DropdownToggle";const Ee=i.createContext(null),Je=(a,s=null)=>a!=null?String(a):s||null,bs=i.createContext(null);bs.displayName="NavContext";const Ya=["eventKey","disabled","onClick","active","as"];function za(a,s){if(a==null)return{};var t={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(s.indexOf(n)>=0)continue;t[n]=a[n]}return t}function vs({key:a,href:s,active:t,disabled:n,onClick:l}){const r=i.useContext(Ee),o=i.useContext(bs),{activeKey:d}=o||{},u=Je(a,s),p=t==null&&a!=null?Je(d)===u:t;return[{onClick:ae(f=>{n||(l==null||l(f),r&&!f.isPropagationStopped()&&r(u,f))}),"aria-disabled":n||void 0,"aria-selected":p,[Ke("dropdown-item")]:""},{isActive:p}]}const ys=i.forwardRef((a,s)=>{let{eventKey:t,disabled:n,onClick:l,active:r,as:o=es}=a,d=za(a,Ya);const[u]=vs({key:t,href:d.href,disabled:n,onClick:l,active:r});return e.jsx(o,Object.assign({},d,{ref:s},u))});ys.displayName="DropdownItem";function Ye(){const a=$a(),s=i.useRef(null),t=i.useCallback(n=>{s.current=n,a()},[a]);return[s,t]}function ve({defaultShow:a,show:s,onSelect:t,onToggle:n,itemSelector:l=`* [${Ke("dropdown-item")}]`,focusFirstItemOnShow:r,placement:o="bottom-start",children:d}){const u=Ws(),[p,x]=Da(s,a,n),[f,h]=Ye(),v=f.current,[S,D]=Ye(),y=S.current,_=Gs(p),$=i.useRef(null),A=i.useRef(!1),w=i.useContext(Ee),g=i.useCallback((q,H,F=H==null?void 0:H.type)=>{x(q,{originalEvent:H,source:F})},[x]),N=ae((q,H)=>{t==null||t(q,H),g(!1,H,"select"),H.isPropagationStopped()||w==null||w(q,H)}),m=i.useMemo(()=>({toggle:g,placement:o,show:p,menuElement:v,toggleElement:y,setMenu:h,setToggle:D}),[g,o,p,v,y,h,D]);v&&_&&!p&&(A.current=v.contains(v.ownerDocument.activeElement));const C=ae(()=>{y&&y.focus&&y.focus()}),E=ae(()=>{const q=$.current;let H=r;if(H==null&&(H=f.current&&xs(f.current)?"keyboard":!1),H===!1||H==="keyboard"&&!/^key.+$/.test(q))return;const F=qe(f.current,l)[0];F&&F.focus&&F.focus()});i.useEffect(()=>{p?E():A.current&&(A.current=!1,C())},[p,A,C,E]),i.useEffect(()=>{$.current=null});const B=(q,H)=>{if(!f.current)return null;const F=qe(f.current,l);let Y=F.indexOf(q)+H;return Y=Math.max(0,Math.min(Y,F.length)),F[Y]};return ya(i.useCallback(()=>u.document,[u]),"keydown",q=>{var H,F;const{key:Y}=q,ee=q.target,Oe=(H=f.current)==null?void 0:H.contains(ee),Rs=(F=S.current)==null?void 0:F.contains(ee);if(/input|textarea/i.test(ee.tagName)&&(Y===" "||Y!=="Escape"&&Oe||Y==="Escape"&&ee.type==="search")||!Oe&&!Rs||Y==="Tab"&&(!f.current||!p))return;$.current=q.type;const Se={originalEvent:q,source:q.type};switch(Y){case"ArrowUp":{const J=B(ee,-1);J&&J.focus&&J.focus(),q.preventDefault();return}case"ArrowDown":if(q.preventDefault(),!p)x(!0,Se);else{const J=B(ee,1);J&&J.focus&&J.focus()}return;case"Tab":Vs(ee.ownerDocument,"keyup",J=>{var Re;(J.key==="Tab"&&!J.target||!((Re=f.current)!=null&&Re.contains(J.target)))&&x(!1,Se)},{once:!0});break;case"Escape":Y==="Escape"&&(q.preventDefault(),q.stopPropagation()),x(!1,Se);break}}),e.jsx(Ee.Provider,{value:N,children:e.jsx(Ce.Provider,{value:m,children:d})})}ve.displayName="Dropdown";ve.Menu=ps;ve.Toggle=js;ve.Item=ys;const Te=i.createContext({});Te.displayName="DropdownContext";const Ns=i.forwardRef(({className:a,bsPrefix:s,as:t="hr",role:n="separator",...l},r)=>(s=O(s,"dropdown-divider"),e.jsx(t,{ref:r,className:I(a,s),role:n,...l})));Ns.displayName="DropdownDivider";const gs=i.forwardRef(({className:a,bsPrefix:s,as:t="div",role:n="heading",...l},r)=>(s=O(s,"dropdown-header"),e.jsx(t,{ref:r,className:I(a,s),role:n,...l})));gs.displayName="DropdownHeader";const ws=i.forwardRef(({bsPrefix:a,className:s,eventKey:t,disabled:n=!1,onClick:l,active:r,as:o=ss,...d},u)=>{const p=O(a,"dropdown-item"),[x,f]=vs({key:t,href:d.href,disabled:n,onClick:l,active:r});return e.jsx(o,{...d,...x,ref:u,className:I(s,p,f.isActive&&"active",n&&"disabled")})});ws.displayName="DropdownItem";const Cs=i.forwardRef(({className:a,bsPrefix:s,as:t="span",...n},l)=>(s=O(s,"dropdown-item-text"),e.jsx(t,{ref:l,className:I(a,s),...n})));Cs.displayName="DropdownItemText";const Me=i.createContext(null);Me.displayName="InputGroupContext";const Ss=i.createContext(null);Ss.displayName="NavbarContext";function ks(a,s){return a}function Es(a,s,t){const n=t?"top-end":"top-start",l=t?"top-start":"top-end",r=t?"bottom-end":"bottom-start",o=t?"bottom-start":"bottom-end",d=t?"right-start":"left-start",u=t?"right-end":"left-end",p=t?"left-start":"right-start",x=t?"left-end":"right-end";let f=a?o:r;return s==="up"?f=a?l:n:s==="end"?f=a?x:p:s==="start"?f=a?u:d:s==="down-centered"?f="bottom":s==="up-centered"&&(f="top"),f}const As=i.forwardRef(({bsPrefix:a,className:s,align:t,rootCloseEvent:n,flip:l=!0,show:r,renderOnMount:o,as:d="div",popperConfig:u,variant:p,...x},f)=>{let h=!1;const v=i.useContext(Ss),S=O(a,"dropdown-menu"),{align:D,drop:y,isRTL:_}=i.useContext(Te);t=t||D;const $=i.useContext(Me),A=[];if(t)if(typeof t=="object"){const q=Object.keys(t);if(q.length){const H=q[0],F=t[H];h=F==="start",A.push(`${S}-${H}-${F}`)}}else t==="end"&&(h=!0);const w=Es(h,y,_),[g,{hasShown:N,popper:m,show:C,toggle:E}]=us({flip:l,rootCloseEvent:n,show:r,usePopper:!v&&A.length===0,offset:[0,2],popperConfig:u,placement:w});if(g.ref=Ue(ks(f),g.ref),Xs(()=>{C&&(m==null||m.update())},[C]),!N&&!o&&!$)return null;typeof d!="string"&&(g.show=C,g.close=()=>E==null?void 0:E(!1),g.align=t);let B=x.style;return m!=null&&m.placement&&(B={...x.style,...g.style},x["x-placement"]=m.placement),e.jsx(d,{...x,...g,style:B,...(A.length||v)&&{"data-bs-popper":"static"},className:I(s,S,C&&"show",h&&`${S}-end`,p&&`${S}-${p}`,...A)})});As.displayName="DropdownMenu";const Ds=i.forwardRef(({bsPrefix:a,split:s,className:t,childBsPrefix:n,as:l=P,...r},o)=>{const d=O(a,"dropdown-toggle"),u=i.useContext(Ce);n!==void 0&&(r.bsPrefix=n);const[p]=fs();return p.ref=Ue(p.ref,ks(o)),e.jsx(l,{className:I(t,d,s&&`${d}-split`,(u==null?void 0:u.show)&&"show"),...p,...r})});Ds.displayName="DropdownToggle";const $s=i.forwardRef((a,s)=>{const{bsPrefix:t,drop:n="down",show:l,className:r,align:o="start",onSelect:d,onToggle:u,focusFirstItemOnShow:p,as:x="div",navbar:f,autoClose:h=!0,...v}=We(a,{show:"onToggle"}),S=i.useContext(Me),D=O(t,"dropdown"),y=Qs(),_=m=>h===!1?m==="click":h==="inside"?m!=="rootClose":h==="outside"?m!=="select":!0,$=ae((m,C)=>{var E;!((E=C.originalEvent)==null||(E=E.target)==null)&&E.classList.contains("dropdown-toggle")&&C.source==="mousedown"||(C.originalEvent.currentTarget===document&&(C.source!=="keydown"||C.originalEvent.key==="Escape")&&(C.source="rootClose"),_(C.source)&&(u==null||u(m,C)))}),w=Es(o==="end",n,y),g=i.useMemo(()=>({align:o,drop:n,isRTL:y}),[o,n,y]),N={down:D,"down-centered":`${D}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return e.jsx(Te.Provider,{value:g,children:e.jsx(ve,{placement:w,show:l,onSelect:d,onToggle:$,focusFirstItemOnShow:p,itemSelector:`.${D}-item:not(.disabled):not(:disabled)`,children:S?v.children:e.jsx(x,{...v,ref:s,className:I(r,l&&"show",N[n])})})})});$s.displayName="Dropdown";const M=Object.assign($s,{Toggle:Ds,Menu:As,Item:ws,ItemText:Cs,Divider:Ns,Header:gs}),Ka=[{value:"primary",label:"Primary School"},{value:"secondary",label:"Secondary School"},{value:"bachelor",label:"Bachelor's Degree"},{value:"master",label:"Master's Degree"},{value:"doctorate",label:"Doctorate"},{value:"diploma",label:"Diploma"},{value:"certificate",label:"Certificate"}],Ps=U().shape({education_level:k().required("Education level is required"),major:k().required("Major/Concentration is required"),institution:k().required("Institution name is required"),duration:k().required("Duration is required"),graduation_year:k().required("Graduation year is required").matches(/^\d{4}$/,"Must be a valid year"),result:k().required("Result is required")}),Is=U().shape({training_title:k().required("Training title is required"),provider:k().required("Provider is required"),year:k().required("Year is required").matches(/^\d{4}$/,"Must be valid year"),remarks:k().nullable()}),_s=U().shape({certificate_title:k().required("Certificate title is required"),issuing_authority:k().required("Issuing authority is required"),date_issued:k().required("Date issued is required"),certificate_id:k().nullable()}),Ua=i.memo(({academic:a,onEdit:s,onDelete:t})=>e.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(L,{className:"mb-3 hover-shadow",children:[e.jsxs(L.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-0 text-primary",children:[a.education_level," - ",a.major]}),e.jsx("small",{className:"text-muted",children:a.institution})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow",children:e.jsx(K,{className:"text-muted"})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:s,children:[e.jsx(K,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:t,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsx(L.Body,{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Duration"}),e.jsx("p",{className:"mb-0",children:a.duration})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Graduation Year"}),e.jsx("p",{className:"mb-0",children:a.graduation_year})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Result"}),e.jsx("p",{className:"mb-0",children:a.result})]})]})})]})})),Wa=i.memo(({training:a,onEdit:s,onDelete:t})=>e.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(L,{className:"mb-3 hover-shadow",children:[e.jsxs(L.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.training_title}),e.jsx("small",{className:"text-muted",children:a.provider})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow",children:e.jsx(K,{className:"text-muted"})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:s,children:[e.jsx(K,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:t,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsx(L.Body,{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Year"}),e.jsx("p",{className:"mb-0",children:a.year})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("label",{className:"text-muted small",children:"Remarks"}),e.jsx("p",{className:"mb-0",children:a.remarks||"N/A"})]})]})})]})})),Ga=i.memo(({certificate:a,onEdit:s,onDelete:t})=>e.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(L,{className:"mb-3 hover-shadow",children:[e.jsxs(L.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.certificate_title}),e.jsx("small",{className:"text-muted",children:a.issuing_authority})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow",children:e.jsx(K,{className:"text-muted"})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:s,children:[e.jsx(K,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:t,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsx(L.Body,{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Date Issued"}),e.jsx("p",{className:"mb-0",children:a.date_issued})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Certificate ID"}),e.jsx("p",{className:"mb-0",children:a.certificate_id||"N/A"})]})]})})]})})),Va=()=>{const a=he(),{currentUser:s,setCurrentUser:t}=Z(),[n,l]=i.useState(!1),[r,o]=i.useState(!1),[d,u]=i.useState(!1),[p,x]=i.useState(null),[f,h]=i.useState(null),[v,S]=i.useState(null),[D,y]=i.useState(!1);if(!s)return R.error("User not found"),null;const _={academics:s!=null&&s.degree_university_name?JSON.parse(s.degree_university_name):[],trainings:s!=null&&s.high_school_name?JSON.parse(s.high_school_name):[],certifications:s!=null&&s.seconday_school_name?JSON.parse(s.seconday_school_name):[],submitAction:""},$=i.useCallback(async w=>{y(!0);try{const g={...s,degree_university_name:JSON.stringify(w.academics),high_school_name:JSON.stringify(w.trainings),seconday_school_name:JSON.stringify(w.certifications)},N=await xe("profile",g),m=ne.fromJson(JSON.stringify(N));te.saveProfile(m),R.success("Profile updated successfully",{icon:e.jsx("span",{children:"✅"})}),w.submitAction==="saveAndNext"&&(t(m),a("/admin/profile-edit/employment"))}catch{R.error("Failed to save profile updates",{icon:e.jsx("span",{children:"❌"})})}finally{y(!1)}},[s,t,a]),A=i.useCallback((w,g,N)=>{R(e.jsxs("div",{children:[e.jsxs("p",{children:["Delete this ",N," entry?"]}),e.jsxs("div",{className:"d-flex gap-2 mt-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>{g(w),R.dismiss()},children:"Delete"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>R.dismiss(),children:"Cancel"})]})]}),{icon:e.jsx("span",{children:"⚠️"})})},[]);return e.jsx(W,{initialValues:_,validateOnChange:!1,validationSchema:U({academics:oe().of(Ps),trainings:oe().of(Is),certifications:oe().of(_s)}),onSubmit:$,children:({values:w,setFieldValue:g})=>e.jsxs(fe,{children:[e.jsxs("div",{className:"accordion",id:"eduAccordion",children:[e.jsxs(j.div,{className:"accordion-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"academicsHeading",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900",type:"button","data-bs-toggle":"collapse","data-bs-target":"#academicsCollapse","aria-expanded":"true","aria-controls":"academicsCollapse",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Academic Qualifications"})})}),e.jsx("div",{id:"academicsCollapse",className:"accordion-collapse collapse show","aria-labelledby":"academicsHeading","data-bs-parent":"#eduAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"fw-bold",children:"List of Academic Entries"}),e.jsxs(P,{variant:"primary",size:"sm",onClick:()=>{x(null),l(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Entry"]})]}),e.jsx(de,{name:"academics",children:({push:N,remove:m,replace:C})=>e.jsxs(e.Fragment,{children:[w.academics.map((E,B)=>e.jsx(Ua,{academic:E,onEdit:()=>{x(B),l(!0)},onDelete:()=>A(B,m,"academic")},E.id)),e.jsx(Xa,{show:n,onHide:()=>l(!1),onSubmit:E=>{p!==null?C(p,E):N(E),l(!1)},initialValues:p!==null?w.academics[p]:null})]})})]})})]}),e.jsxs(j.div,{className:"accordion-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"trainingHeading",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900 collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#trainingCollapse","aria-expanded":"false","aria-controls":"trainingCollapse",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Trainings"})})}),e.jsx("div",{id:"trainingCollapse",className:"accordion-collapse collapse","aria-labelledby":"trainingHeading","data-bs-parent":"#eduAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"fw-bold",children:"List of Trainings"}),e.jsxs(P,{variant:"primary",size:"sm",onClick:()=>{h(null),o(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Training"]})]}),e.jsx(de,{name:"trainings",children:({push:N,remove:m,replace:C})=>e.jsxs(e.Fragment,{children:[w.trainings.map((E,B)=>e.jsx(Wa,{training:E,onEdit:()=>{h(B),o(!0)},onDelete:()=>A(B,m,"training")},E.id)),e.jsx(Qa,{show:r,onHide:()=>o(!1),onSubmit:E=>{f!==null?C(f,E):N(E),o(!1)},initialValues:f!==null?w.trainings[f]:null})]})})]})})]}),e.jsxs(j.div,{className:"accordion-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"certHeading",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900 collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#certCollapse","aria-expanded":"false","aria-controls":"certCollapse",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Professional Certificates"})})}),e.jsx("div",{id:"certCollapse",className:"accordion-collapse collapse","aria-labelledby":"certHeading","data-bs-parent":"#eduAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"fw-bold",children:"List of Certificates"}),e.jsxs(P,{variant:"primary",size:"sm",onClick:()=>{S(null),u(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Certificate"]})]}),e.jsx(de,{name:"certifications",children:({push:N,remove:m,replace:C})=>e.jsxs(e.Fragment,{children:[w.certifications.map((E,B)=>e.jsx(Ga,{certificate:E,onEdit:()=>{S(B),u(!0)},onDelete:()=>A(B,m,"certificate")},E.id)),e.jsx(Za,{show:d,onHide:()=>u(!1),onSubmit:E=>{v!==null?C(v,E):N(E),u(!1)},initialValues:v!==null?w.certifications[v]:null})]})})]})})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5 border-top pt-4 mb-4 pe-5 ps-0",children:[e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>a("/admin/profile-edit/bio"),children:"← Back"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",onClick:()=>g("submitAction","save"),disabled:D,children:[e.jsx(je,{className:"me-2"}),D?"Saving...":"Save"]}),e.jsxs("button",{type:"submit",className:"btn btn-success",onClick:()=>g("submitAction","saveAndNext"),disabled:D,children:["Next Step",e.jsx(ge,{className:"ms-2"})]})]})]})]})})},Xa=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:n})=>e.jsx(T,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(W,{initialValues:n||{id:Math.random().toString(36).substr(2,9),education_level:"",major:"",institution:"",duration:"",graduation_year:"",result:""},validationSchema:Ps,onSubmit:t,validateOnChange:!1,children:({handleSubmit:l,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(T.Header,{closeButton:!0,className:"bg-light",children:e.jsx(T.Title,{children:n?"Edit Education":"Add New Education"})}),e.jsx(T.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"education_level",label:"Education Level",component:o=>e.jsx(z,{...o,options:Ka,placeholder:"Select"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"major",label:"Major/Concentration",placeholder:"e.g. Computer Science",component:b})}),e.jsx("div",{className:"col-md-12",children:e.jsx(c,{name:"institution",label:"Institution Name",placeholder:"University of Example",component:b})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"duration",label:"Duration",placeholder:"e.g. 4 years",component:b})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"graduation_year",label:"Graduation Year",placeholder:"2020",component:b})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"result",label:"Result",placeholder:"e.g. GPA 3.8",component:b})})]})}),e.jsxs(T.Footer,{className:"border-0",children:[e.jsx(P,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(P,{variant:"primary",onClick:()=>l(),disabled:r,children:n?"Save Changes":"Add Education"})]})]})})})),Qa=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:n})=>e.jsx(T,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(W,{initialValues:n||{id:Math.random().toString(36).substr(2,9),training_title:"",provider:"",year:"",remarks:""},validationSchema:Is,onSubmit:t,validateOnChange:!1,children:({handleSubmit:l,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(T.Header,{closeButton:!0,className:"bg-light",children:e.jsx(T.Title,{children:n?"Edit Training":"Add New Training"})}),e.jsx(T.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"training_title",label:"Training Title",placeholder:"e.g. Project Management",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"provider",label:"Provider",placeholder:"e.g. ABC Institute",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"year",label:"Year",placeholder:"2021",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"remarks",label:"Remarks",placeholder:"Any relevant notes...",component:b})})]})}),e.jsxs(T.Footer,{className:"border-0",children:[e.jsx(P,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(P,{variant:"primary",onClick:()=>l(),disabled:r,children:n?"Save Changes":"Add Training"})]})]})})})),Za=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:n})=>e.jsx(T,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(W,{initialValues:n||{id:Math.random().toString(36).substr(2,9),certificate_title:"",issuing_authority:"",date_issued:"",certificate_id:""},validationSchema:_s,onSubmit:t,validateOnChange:!1,children:({handleSubmit:l,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(T.Header,{closeButton:!0,className:"bg-light",children:e.jsx(T.Title,{children:n?"Edit Certificate":"Add New Certificate"})}),e.jsx(T.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"certificate_title",label:"Certificate Title",placeholder:"e.g. Certified Network Admin",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"issuing_authority",label:"Issuing Authority",placeholder:"e.g. Cisco",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"date_issued",label:"Date Issued",placeholder:"2022-05-10",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"certificate_id",label:"Certificate ID",placeholder:"Optional",component:b})})]})}),e.jsxs(T.Footer,{className:"border-0",children:[e.jsx(P,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(P,{variant:"primary",onClick:()=>l(),disabled:r,children:n?"Save Changes":"Add Certificate"})]})]})})})),Ts=i.createContext(void 0),et=()=>{const a=i.useContext(Ts);if(!a)throw new Error("useProfileEdit must be used within a ProfileEditProvider");return a},st=({children:a})=>{const[s,t]=i.useState(new ne);return e.jsx(Ts.Provider,{value:{profile:s,setProfile:t},children:a})};class ue{constructor(){ye(this,"id","0");ye(this,"jobs_count","");ye(this,"name","")}static async getItems(){let s=[];try{if(s=await this.getLocal(),s.length>0)return this.getOnline().catch(console.error),s}catch(t){console.error("Error fetching local data:",t)}try{if(await this.getOnline(),s=await this.getLocal(),!s||s.length===0)throw new Error("Failed to fetch districts.");return s}catch(t){throw alert("Failed to load districts: "+t),t}}static async getLocal(){try{const s=te.loadFromDatabase(Zs);return Array.isArray(s)?s.map(t=>ue.fromJson(JSON.stringify(t))):[]}catch(s){return console.error("Error reading local districts:",s),[]}}static async getOnline(){try{const s=await ea("districts",{});if(s.code!==1||!Array.isArray(s.data))throw new Error(s.message||"Failed to fetch items.")}catch(s){throw console.error("Error fetching remote districts:",s),s}}toJSON(){const s={};for(const t in this)Object.prototype.hasOwnProperty.call(this,t)&&(s[t]=this[t]);return s}static fromJson(s){try{const t=JSON.parse(s)||{},n=new ue;for(const l of Object.keys(t))l in n&&(n[l]=t[l]);return n}catch{return new ue}}}const G={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10}},at=()=>{const a=he(),[s,t]=i.useState(!1),[n,l]=i.useState(!1),[r,o]=i.useState(""),[d,u]=i.useState(""),[p,x]=i.useState(!1),{setCurrentUser:f}=Z(),{currentUser:h}=Z(),[v,S]=i.useState([]),[D,y]=i.useState([]);if(!h)return alert("User not found"),null;const _=U().shape({first_name:k().required("First Name is required"),last_name:k().min(2,"Last Name must be at least 2 characters").required("Last Name is required"),sex:k().required("Gender is required"),title:k().required("Title is required")});i.useEffect(()=>{$()},[]);const $=async()=>{var w=await sa.getItems();if(w!=null&&w.CATEGORIES!=null){var g=[];for(var N in w.CATEGORIES){var m=w.CATEGORIES[N];m!=null&&g.push({value:m.id,label:m.name})}g.length>0?y(g):alert("No job categories found")}var C=[];try{C=await ue.getItems()}catch(B){alert("Failed to load districts: "+B);return}if(C.length<1){alert("No districts found");return}S([]);let E=[];for(const B of C)B.name&&E.push({value:B.id+"",label:B.name});S(E)},A=async(w,g)=>{o(""),u(""),x(!0);const N=(w==null?void 0:w.submitAction)||"save";try{const m=await xe("profile",w),C=ne.fromJson(JSON.stringify(m));f(C),te.saveProfile(C),u("Profile updated successfully"),R.success("Profile updated successfully"),N==="saveAndNext"&&a("/admin/profile-edit/education")}catch(m){o("Failed: "+m),R.error("Profile update failed"),g.setSubmitting(!1)}finally{x(!1),g.setSubmitting(!1)}};return e.jsx(W,{initialValues:h,validationSchema:_,onSubmit:A,children:({values:w,isSubmitting:g,setFieldValue:N})=>e.jsx(me,{mode:"wait",children:e.jsx(j.div,{variants:G,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(fe,{children:[p&&e.jsx(j.div,{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-dark bg-opacity-50",variants:G,initial:"hidden",animate:"visible",exit:"exit",style:{zIndex:9999},children:e.jsx("div",{className:"spinner-border text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),r&&e.jsxs(j.div,{className:"alert alert-danger alert-dismissible fade show",role:"alert",variants:G,initial:"hidden",animate:"visible",exit:"exit",children:[r,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),d&&e.jsxs(j.div,{className:"alert alert-success alert-dismissible fade show",role:"alert",variants:G,initial:"hidden",animate:"visible",exit:"exit",children:[d,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),e.jsxs("div",{className:"accordion",id:"profileEditAccordion",children:[e.jsxs(j.div,{className:"accordion-item",variants:G,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"headingOne",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Personal Details"})})}),e.jsx("div",{id:"collapseOne",className:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#profileEditAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"title",label:"Title",options:[{value:"Mr",label:"Mr"},{value:"Mrs",label:"Mrs"},{value:"Miss",label:"Miss"},{value:"Ms",label:"Ms"},{value:"Dr",label:"Dr"},{value:"Prof",label:"Prof"},{value:"Rev",label:"Rev"},{value:"Hon",label:"Hon"}],component:z})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"first_name",label:e.jsxs(e.Fragment,{children:["First Name"," ",e.jsx("span",{className:"text-danger",children:"*"})]}),placeholder:"Enter First Name",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"last_name",label:"Last Name",placeholder:"Enter Last Name",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"sex",label:"Gender",options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],component:m=>e.jsx(z,{...m})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"father_name",label:"Father's Name",placeholder:"Enter Father's Name",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"mother_name",label:"Mother's Name",placeholder:"Enter Mother's Name",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"date_of_birth",label:"Date of Birth",component:Ae})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"religion",label:"Religion",options:[{value:"Islam",label:"Islam"},{value:"Christian",label:"Christian"},{value:"Hindu",label:"Hindu"},{value:"Other",label:"Other"}],component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"marital_status",label:"Marital Status",options:[{value:"Single",label:"Single"},{value:"Married",label:"Married"},{value:"Divorced",label:"Divorced"},{value:"Widowed",label:"Widowed"}],component:z})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"nationality",label:"Nationality",options:aa,component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"languages",label:"Languages",placeholder:"e.g. English, Swahili",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"blood_group",label:"Blood Group",options:[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"height",label:"Height",placeholder:"e.g. 170 cm",component:b})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"weight",label:"Weight",placeholder:"e.g. 65 kg",component:b})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"has_disability",label:"Do you have a disability?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline",onChange:C=>{m.form.setFieldValue(m.field.name,C.target.value),l(C.target.value==="Yes")}})})})]}),e.jsx(me,{mode:"wait",children:n&&e.jsxs(j.div,{variants:G,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"is_registered_on_disability",label:"Are you registered on ict4personswithdisabilities.org?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"disability_type",label:"Disability Type",placeholder:"Enter Disability Type",component:b})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"dificulty_display_on_cv",label:"Display Difficulty on CV",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_see",label:"Difficulty to See",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_hear",label:"Difficulty to Hear",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_walk",label:"Difficulty to Walk",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_speak",label:"Difficulty to Speak",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})})]})]})})]})})]}),e.jsxs(j.div,{className:"accordion-item",variants:G,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"headingTwo",children:e.jsx("button",{className:"accordion-button collapsed bg-light text-black fw-bold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Contact & Identity"})})}),e.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#profileEditAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"district_id",label:"District",placeholder:"District of Residence",options:v,component:z})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"home_address",label:"Home Address",placeholder:"Permanent or Family Residence",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"current_address",label:"Current Address",placeholder:"Present Working/Residence Address",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"phone_number_1",label:e.jsx(e.Fragment,{children:"Phone Number 1"}),placeholder:"Primary Contact No.",component:b,disabled:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"phone_number_2",label:"Phone Number 2",placeholder:"Alternate Contact No.",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"country_code",label:"Country Code",placeholder:"e.g. +256",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"emergency_person_name",label:"Emergency Contact Name",placeholder:"Who to contact in emergency",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"emergency_person_phone",label:"Emergency Contact Phone",placeholder:"Enter phone no.",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"national_id_number",label:"National ID Number",placeholder:"Enter your National ID",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"passport_number",label:"Passport Number",placeholder:"Enter Passport No.",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"tin",label:"TIN",placeholder:"Tax Identification Number",component:b})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"nssf_number",label:"NSSF Number",placeholder:"Social Security Number",component:b})})})]})})]}),e.jsxs(j.div,{className:"accordion-item",variants:G,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"headingThree",children:e.jsx("button",{className:"accordion-button collapsed bg-light text-black fw-bold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Professional & Job Preferences"})})}),e.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#profileEditAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"special_qualification",label:"Job Designation",placeholder:"e.g. Software Engineer, Business Analyst, etc.",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"objective",label:"Career Objective",placeholder:"Briefly describe your career objective",component:He})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsx(c,{name:"career_summary",label:"Career Summary",placeholder:"Short summary of work experience",component:He})})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"present_salary",label:"Present Salary",placeholder:"Enter current salary if employed",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"expected_salary",label:"Expected Salary",placeholder:"Enter your expected salary",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"expected_job_level",label:"Expected Job",placeholder:"e.g. Software Engineer, Business Analyst, etc.",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"expected_job_nature",label:"Expected Job Nature",placeholder:"Full Time / Part Time / Contract",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_location",label:"Preferred Job Location",placeholder:"e.g. Kampala",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_category",label:"Select Preferred Job Category",placeholder:"e.g. IT, Finance, Marketing",options:D,component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_category_other",label:"Preferred Job Category (Other)",placeholder:"Enter if not listed above",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_districts",label:"Preferred Job Districts",placeholder:"List any specific districts",component:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_abroad",label:"Preferred Job Abroad",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline",onChange:C=>{m.form.setFieldValue(m.field.name,C.target.value),t(C.target.value==="Yes")}})})}),e.jsx(me,{mode:"wait",children:s&&e.jsx(j.div,{className:"col-md-6",variants:G,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(c,{name:"preferred_job_countries",label:"Preferred Job Countries",placeholder:"List countries if abroad is yes",component:b})})})]})]})})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5 border-top pt-4 mb-5 mb-lg-10",children:[e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>a("/admin/profile-edit/photo"),children:"← Back"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",onClick:()=>N("submitAction","save"),disabled:g,children:[e.jsx(je,{className:"me-2"}),g?"Saving...":"Save"]}),e.jsxs("button",{type:"submit",className:"btn btn-success",onClick:()=>N("submitAction","saveAndNext"),disabled:g,children:["Next Step",e.jsx(ge,{className:"ms-2"})]})]})]})]})})})})},tt={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-20}},nt={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.2}}},Ms=U().shape({companyName:k().required("Company Name is required"),companyBusiness:k().required("Company Business is required"),position:k().required("Designation/Position is required"),department:k().required("Department is required"),startDate:k().required("Employment start date is required"),responsibilities:k().required("Responsibilities are required"),employmentPeriod:k().required("Employment period is required"),stillEmployed:ta()}),lt=i.memo(({employment:a,index:s,onEdit:t,onDelete:n})=>e.jsx(j.div,{variants:tt,initial:"hidden",animate:"visible",exit:"exit",layout:!0,children:e.jsxs(L,{className:"mb-3 hover-shadow transition-all",children:[e.jsxs(L.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.position}),e.jsx("small",{className:"text-muted",children:a.companyName})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow p-0",children:e.jsx(j.div,{whileHover:{scale:1.1},children:e.jsx(K,{className:"text-muted fs-5"})})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:t,children:[e.jsx(K,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:n,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsxs(L.Body,{children:[e.jsxs(j.div,{layout:!0,className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Company Business"}),e.jsx("p",{className:"mb-0",children:a.companyBusiness})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Department"}),e.jsx("p",{className:"mb-0",children:a.department})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Start Date"}),e.jsx("p",{className:"mb-0",children:a.startDate})]})]}),e.jsx(j.div,{layout:!0,className:"row g-2 mt-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"text-muted small",children:"Responsibilities"}),e.jsx("p",{className:"mb-0",children:a.responsibilities})]})}),e.jsxs(j.div,{layout:!0,className:"row g-2 mt-2",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Employment Period (in Years)"}),e.jsx("p",{className:"mb-0",children:a.employmentPeriod})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Still Employed?"}),e.jsx("p",{className:"mb-0",children:a.stillEmployed?"Yes":"No"})]})]})]})]})})),it=()=>{const a=he(),{currentUser:s,setCurrentUser:t}=Z(),[n,l]=i.useState(!1),[r,o]=i.useState(null),[d,u]=i.useState(!1);if(!s)return R.error("User not found"),null;const p={employmentHistories:s!=null&&s.primary_school_name?JSON.parse(s.primary_school_name):[],submitAction:""},x=i.useCallback(async h=>{u(!0);try{const v={...s,primary_school_name:JSON.stringify(h.employmentHistories)},S=await xe("profile",v),D=ne.fromJson(JSON.stringify(S));te.saveProfile(D),R.success("Employment details updated successfully",{icon:e.jsx("span",{children:"✅"})}),h.submitAction==="saveAndNext"&&a("/admin/profile-edit/other-section")}catch{R.error("Failed to save employment details",{icon:e.jsx("span",{children:"❌"})})}finally{u(!1)}},[s,t,a]),f=i.useCallback((h,v)=>{R(e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"d-flex flex-column p-3",children:[e.jsx("h6",{className:"mb-3",children:"Delete this employment entry?"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(P,{variant:"danger",size:"sm",onClick:()=>{v(h),R.dismiss()},children:"Delete"}),e.jsx(P,{variant:"outline-secondary",size:"sm",onClick:()=>R.dismiss(),children:"Cancel"})]})]}),{icon:e.jsx("span",{children:"⚠️"})})},[]);return e.jsx(_e,{fluid:"lg",className:"py-4",children:e.jsx(W,{initialValues:p,validationSchema:U({employmentHistories:oe().of(Ms)}),validateOnChange:!1,onSubmit:x,children:({values:h,setFieldValue:v})=>e.jsxs(fe,{children:[e.jsx(Q,{defaultActiveKey:"0",className:"shadow-sm rounded-3 overflow-hidden",children:e.jsxs(Q.Item,{eventKey:"0",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",children:e.jsx(Q.Button,{className:"bg-light text-black fw-bold text-gray-900",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Employment History"})})}),e.jsx(Q.Collapse,{eventKey:"0",children:e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4",children:[e.jsx("div",{className:"d-flex justify-content-end mb-4",children:e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsxs(P,{variant:"primary",onClick:()=>{o(null),l(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Employment"]})})}),e.jsx(de,{name:"employmentHistories",children:({push:S,remove:D,replace:y})=>e.jsx(me,{mode:"popLayout",children:h.employmentHistories.map((_,$)=>e.jsx(lt,{employment:_,index:$,onEdit:()=>{o($),l(!0)},onDelete:()=>f($,D)},_.id))})})]})})]})}),e.jsx(rt,{show:n,onHide:()=>l(!1),onSubmit:S=>{r!==null?v(`employmentHistories[${r}]`,S):v("employmentHistories",[...h.employmentHistories,S]),l(!1)},initialValues:r!==null?h.employmentHistories[r]:null}),e.jsxs(j.div,{className:"d-flex justify-content-between mt-5 border-top pt-4",layout:!0,children:[e.jsx(j.div,{whileHover:{x:-5},children:e.jsx(P,{variant:"outline-primary",onClick:()=>a("/admin/profile-edit/education"),children:"← Back"})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsxs(P,{type:"submit",variant:"primary",onClick:()=>v("submitAction","save"),disabled:d,children:[e.jsx(je,{className:"me-2"}),d?e.jsx("span",{className:"spinner-border spinner-border-sm"}):"Save"]})}),e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsxs(P,{type:"submit",variant:"success",onClick:()=>v("submitAction","saveAndNext"),disabled:d,children:["Next Step",e.jsx(ge,{className:"ms-2"})]})})]})]})]})})})},rt=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:n})=>e.jsx(T,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(j.div,{variants:nt,initial:"hidden",animate:"visible",children:e.jsx(W,{initialValues:n||{id:Math.random().toString(36).substr(2,9),companyName:"",companyBusiness:"",position:"",department:"",startDate:"",responsibilities:"",employmentPeriod:"",stillEmployed:!1},validationSchema:Ms,onSubmit:t,validateOnChange:!1,children:({handleSubmit:l,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(T.Header,{closeButton:!0,className:"bg-light",children:e.jsx(T.Title,{className:"text-primary",children:n?"Edit Employment":"Add New Employment"})}),e.jsx(T.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"companyName",label:"Company Name",placeholder:"ABC Ltd.",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"companyBusiness",label:"Company Business",placeholder:"Software, Retail, Consulting...",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"position",label:"Position",placeholder:"e.g. Software Engineer",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"department",label:"Department",placeholder:"e.g. IT",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"startDate",label:"Start Date",component:Ae})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"employmentPeriod",label:"Employment Period (in Years)",placeholder:"e.g. 2 Years",component:b})}),e.jsx("div",{className:"col-12",children:e.jsx(c,{name:"responsibilities",label:"Responsibilities",placeholder:"Your daily duties...",component:b,as:"textarea",rows:4})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-check",children:[e.jsx(c,{type:"checkbox",name:"stillEmployed",className:"form-check-input",id:"stillEmployed"}),e.jsx("label",{className:"form-check-label",htmlFor:"stillEmployed",children:"Currently employed here"})]})})]})}),e.jsxs(T.Footer,{className:"border-0",children:[e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsx(P,{variant:"outline-secondary",onClick:s,children:"Cancel"})}),e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsx(P,{variant:"primary",onClick:()=>l(),disabled:r,children:n?"Save Changes":"Add Employment"})})]})]})})})})),ot={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-20}},ct={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.2}}},dt=[{value:"publication",label:"Publication"},{value:"award",label:"Award"},{value:"project",label:"Project"},{value:"other",label:"Other"}],Os=U().shape({type:k().required("Accomplishment type is required"),title:k().required("Title is required"),description:k().required("Description is required"),url:k().url("Must be a valid URL").nullable(),issueDate:k().required("Issue date is required")}),mt=i.memo(({accomplishment:a,index:s,onEdit:t,onDelete:n})=>e.jsx(j.div,{variants:ot,initial:"hidden",animate:"visible",exit:"exit",layout:!0,children:e.jsxs(L,{className:"mb-3 hover-shadow transition-all",children:[e.jsxs(L.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.title}),e.jsx("small",{className:"text-muted text-capitalize",children:a.type})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow p-0",children:e.jsx(j.div,{whileHover:{scale:1.1},children:e.jsx(K,{className:"text-muted fs-5"})})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:t,children:[e.jsx(K,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:n,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsxs(L.Body,{children:[e.jsxs(j.div,{layout:!0,className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Issue Date"}),e.jsx("p",{className:"mb-0",children:a.issueDate})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("label",{className:"text-muted small",children:"URL"}),e.jsx("p",{className:"mb-0",children:a.url?e.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.url}):"N/A"})]})]}),e.jsxs(j.div,{layout:!0,className:"mt-3",children:[e.jsx("label",{className:"text-muted small",children:"Description"}),e.jsx("p",{className:"mb-0",children:a.description})]})]})]})})),ut=()=>{const a=he(),{currentUser:s,setCurrentUser:t}=Z(),[n,l]=i.useState(!1),[r,o]=i.useState(null),[d,u]=i.useState(!1);if(!s)return R.error("User not found"),null;const p={accomplishments:s!=null&&s.school_pay_payment_code?JSON.parse(s.school_pay_payment_code):[],submitAction:""},x=i.useCallback(async h=>{u(!0);try{const v={...s,school_pay_payment_code:JSON.stringify(h.accomplishments)},S=await xe("profile",{school_pay_payment_code:JSON.stringify(h.accomplishments)}),D=ne.fromJson(JSON.stringify(S));te.saveProfile(D),R.success("Accomplishments updated successfully",{icon:e.jsx("span",{children:"✅"})}),h.submitAction==="saveAndNext"&&a("/admin/profile-edit/some-other-page")}catch{R.error("Failed to save accomplishments",{icon:e.jsx("span",{children:"❌"})})}finally{u(!1)}},[s,t,a]),f=i.useCallback((h,v)=>{R(e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"d-flex flex-column p-3",children:[e.jsx("h6",{className:"mb-3",children:"Delete this accomplishment?"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(P,{variant:"danger",size:"sm",onClick:()=>{v(h),R.dismiss()},children:"Delete"}),e.jsx(P,{variant:"outline-secondary",size:"sm",onClick:()=>R.dismiss(),children:"Cancel"})]})]}),{icon:e.jsx("span",{children:"⚠️"})})},[]);return e.jsx(_e,{fluid:"lg",className:"py-4",children:e.jsx(W,{initialValues:p,validationSchema:U({accomplishments:oe().of(Os)}),validateOnChange:!1,onSubmit:x,children:({values:h,setFieldValue:v})=>e.jsxs(fe,{children:[e.jsx(Q,{defaultActiveKey:"0",className:"shadow-sm rounded-3 overflow-hidden",children:e.jsxs(Q.Item,{eventKey:"0",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",children:e.jsx(Q.Button,{className:"bg-light text-black fw-bold text-gray-900",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Accomplishments & Achievements"})})}),e.jsx(Q.Collapse,{eventKey:"0",children:e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4",children:[e.jsx("div",{className:"d-flex justify-content-end mb-4",children:e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsxs(P,{variant:"primary",onClick:()=>{o(null),l(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Accomplishment"]})})}),e.jsx(de,{name:"accomplishments",children:({push:S,remove:D,replace:y})=>e.jsx(me,{mode:"popLayout",children:h.accomplishments.map((_,$)=>e.jsx(mt,{accomplishment:_,index:$,onEdit:()=>{o($),l(!0)},onDelete:()=>f($,D)},_.id))})})]})})]})}),e.jsx(pt,{show:n,onHide:()=>l(!1),onSubmit:S=>{r!==null?v(`accomplishments[${r}]`,S):v("accomplishments",[...h.accomplishments,S]),l(!1)},initialValues:r!==null?h.accomplishments[r]:null}),e.jsxs(j.div,{className:"d-flex justify-content-between mt-5 border-top pt-4",layout:!0,children:[e.jsx(j.div,{whileHover:{x:-5},children:e.jsx(P,{variant:"outline-primary",onClick:()=>a("/admin/profile-edit/employment"),children:"← Back"})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsxs(P,{type:"submit",variant:"primary",onClick:()=>v("submitAction","save"),disabled:d,children:[e.jsx(je,{className:"me-2"}),d?e.jsx("span",{className:"spinner-border spinner-border-sm"}):"Save"]})}),e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsxs(P,{type:"submit",variant:"success",onClick:()=>a("/admin/my-cv"),disabled:d,children:["Finish",e.jsx(na,{className:"ms-2"})]})})]})]})]})})})},pt=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:n})=>e.jsx(T,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(j.div,{variants:ct,initial:"hidden",animate:"visible",children:e.jsx(W,{initialValues:n||{id:Math.random().toString(36).substr(2,9),type:"",title:"",description:"",url:"",issueDate:""},validationSchema:Os,onSubmit:t,validateOnChange:!1,children:({handleSubmit:l,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(T.Header,{closeButton:!0,className:"bg-light",children:e.jsx(T.Title,{className:"text-primary",children:n?"Edit Accomplishment":"Add New Accomplishment"})}),e.jsx(T.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"type",label:"Type",component:o=>e.jsx(z,{...o,options:dt,placeholder:"Select type"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"title",label:"Title",placeholder:"Best Research Paper 2023",component:b})}),e.jsx("div",{className:"col-12",children:e.jsx(c,{name:"description",label:"Description",placeholder:"Describe your accomplishment...",component:b,as:"textarea",rows:4})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"url",label:"URL",placeholder:"https://example.com",component:b})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"issueDate",label:"Issue Date",component:Ae})})]})}),e.jsxs(T.Footer,{className:"border-0",children:[e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsx(P,{variant:"outline-secondary",onClick:s,children:"Cancel"})}),e.jsx(j.div,{whileHover:{scale:1.05},children:e.jsx(P,{variant:"primary",onClick:()=>l(),disabled:r,children:n?"Save Changes":"Add Accomplishment"})})]})]})})})})),ht=()=>{const a=he(),[s,t]=i.useState(""),[n,l]=i.useState(""),[r,o]=i.useState(!1),[d,u]=i.useState(null),{setCurrentUser:p}=Z(),{currentUser:x}=Z();if(!x)return null;const f=U().shape({first_name:k().required("First Name is required"),last_name:k().min(2).required("Last Name is required"),sex:k().required("Gender is required"),title:k().required("Title is required")}),h=y=>{y&&y.length>0&&u(y[0])},{getRootProps:v,getInputProps:S}=la({onDrop:h}),D=async(y,_)=>{t(""),l(""),o(!0);const $=y.submitAction||"save";try{if(!d){R.warn("Select a profile photo first.");return}const A=new FormData;Object.entries(y).forEach(([N,m])=>{A.append(N,m?m.toString():"")}),d&&A.append("profile_photo",d);const w=await xe("profile",A),g=ne.fromJson(JSON.stringify(w));p(g),te.saveProfile(g),l("Profile updated successfully"),R.success("Profile updated successfully"),$==="saveAndNext"&&a("/admin/profile-edit/bio")}catch(A){t("Failed: "+A),R.error("Profile update failed")}finally{o(!1),_.setSubmitting(!1)}};return e.jsx(W,{initialValues:x,validationSchema:f,onSubmit:D,children:({isSubmitting:y,setFieldValue:_})=>e.jsxs(fe,{children:[e.jsx(j.div,{className:"card-header bg-light text-black fw-bold ps-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx("h2",{className:"text-primary fs-1 fw-bolder mt-7 ps-0",children:"Personal Details"})}),r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:e.jsx("div",{className:"spinner-border text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),s&&e.jsxs(j.div,{className:"alert alert-danger alert-dismissible fade show",role:"alert",initial:{opacity:0},animate:{opacity:1},children:[s,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),n&&e.jsxs(j.div,{className:"alert alert-success alert-dismissible fade show",role:"alert",initial:{opacity:0},animate:{opacity:1},children:[n,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),x.avatar&&!x.avatar.toLowerCase().includes("user")&&e.jsx(j.div,{className:"d-flex justify-content-center mb-4 mt-5 mt-lg-10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:e.jsx("img",{src:te.img(x.avatar),alt:"avatar",style:{width:200,height:200,borderRadius:"10%"}})}),e.jsx(j.div,{className:"d-flex justify-content-center mb-4 mt-5 mt-lg-10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:e.jsxs("div",{...v(),style:{width:200,height:200,border:"2px dashed #ccc",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",overflow:"hidden"},children:[e.jsx("input",{...S()}),d?e.jsx("img",{src:URL.createObjectURL(d),alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("p",{className:"text-muted mb-0",children:e.jsx("span",{className:"ms-3 fs-6 fw-bold text-gray-700",children:x.avatar&&!x.avatar.toLowerCase().includes("user")?"Set profile photo":"Change profile photo"})})]})}),e.jsxs(j.div,{className:"d-flex justify-content-between mt-5 border-top pt-4 mb-5 mb-lg-10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsxs("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>a("/admin/profile-edit/education"),children:[e.jsx(ia,{className:"me-2 text-danger"}),"Cancel"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",onClick:()=>_("submitAction","save"),disabled:y,children:[e.jsx(je,{className:"me-2"}),y?"Saving...":"Save"]}),e.jsxs("button",{type:"submit",className:"btn btn-success",onClick:()=>_("submitAction","saveAndNext"),disabled:y,children:["Next Step ",e.jsx(ge,{className:"ms-2"})]})]})]})]})})},yt=()=>{const{currentUser:a}=Z(),[s,t]=i.useState(!1),n=ra(),l=[{title:"Profile",path:"/admin/profile-edit/bio",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}];return a?e.jsxs(st,{children:[e.jsx(xt,{currentUser:a,setIsLoading:t}),s&&e.jsx("div",{children:"Loading..."})," ",e.jsx(oa,{children:e.jsxs(se,{path:"/*",element:e.jsxs(e.Fragment,{children:[e.jsx(ca,{}),e.jsx(da,{children:e.jsxs("div",{className:"stepper stepper-pills stepper-column d-flex flex-column flex-xl-row flex-row-fluid",children:[e.jsx("div",{className:"card d-none d-xl-flex justify-content-center justify-content-xl-start flex-row-auto w-100 w-xl-300px w-xxl-400px me-9",children:e.jsx("div",{className:"stepper stepper-pills stepper-column d-flex flex-column flex-xl-row flex-row-fluid",children:e.jsx("div",{className:"card d-flex justify-content-center justify-content-xl-start flex-row-auto w-100 w-xl-300px w-xxl-400px me-9",children:e.jsxs("div",{className:"card-body px-3 px-lg-10 py-10 py-lg-10",children:[e.jsx("div",{className:"d-flex flex-wrap flex-stack justify-content-center mb-5",children:e.jsxs("div",{className:"d-flex align-items-center w-200px w-sm-300px flex-column mt-3",children:[e.jsxs("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[e.jsx("span",{className:"fw-bold fs-6 text-gray-500",children:"Profile Compleation"}),e.jsx("span",{className:"fw-bolder fs-6",children:"50%"})]}),e.jsx("div",{className:"h-5px mx-3 w-100 bg-light mb-3",children:e.jsx("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"50%"}})})]})}),e.jsx(le,{className:"stepper-nav",to:"/admin/profile-edit/photo",children:e.jsxs("div",{className:`stepper-item ${n.pathname==="/admin/profile-edit/photo"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"1"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${n.pathname==="/admin/profile-edit/photo"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Profile Photo"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your profile photo and cover"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{className:"stepper-nav",to:"/admin/profile-edit/bio",children:e.jsxs("div",{className:`stepper-item ${n.pathname==="/admin/profile-edit/bio"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"2"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${n.pathname==="/admin/profile-edit/bio"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Biodata"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your personal information"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{to:"/admin/profile-edit/education",className:"stepper-nav",children:e.jsxs("div",{className:`stepper-item ${n.pathname==="/admin/profile-edit/education"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"3"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${n.pathname==="/admin/profile-edit/education"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Education & Training"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your personal information"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{to:"/admin/profile-edit/employment",className:"stepper-nav",children:e.jsxs("div",{className:`stepper-item ${n.pathname==="/admin/profile-edit/employment"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"4"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${n.pathname==="/admin/profile-edit/employment"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Employment"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your employment history"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{to:"/admin/profile-edit/accomplishment",className:"stepper-nav",children:e.jsx("div",{className:`stepper-item ${n.pathname==="/admin/profile-edit/accomplishment"?"current":""}`,"data-kt-stepper-element":"nav",children:e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"5"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${n.pathname==="/admin/profile-edit/accomplishment"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Accomplishments"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your accomplishments"})]})]})})})]})})})}),e.jsx("div",{className:"d-flex flex-row-fluid flex-s bg-body rounded w-100 w-xl-800px w-xxl-1000px d-flex flex-column card rounded",children:e.jsx(ma,{})})]})})]}),children:[e.jsx(se,{path:"photo",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:l,children:"Profile Photo"}),e.jsx(ht,{})]})}),e.jsx(se,{path:"bio",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:l,children:"Personal Information"}),e.jsx(at,{})]})}),e.jsx(se,{path:"education",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:l,children:"Education"}),e.jsx(Va,{})]})}),e.jsx(se,{path:"employment",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:l,children:"Employment"}),e.jsx(it,{})]})}),e.jsx(se,{path:"accomplishment",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:l,children:"Accomplishment"}),e.jsx(ut,{})]})}),e.jsx(se,{path:"",element:e.jsx(Fe,{to:"photo",replace:!0})})]})})]}):e.jsx(Fe,{to:"/login",replace:!0})},xt=({currentUser:a,setIsLoading:s})=>{const{setProfile:t}=et();return i.useEffect(()=>{(async()=>{s(!0);try{if(a){const l=ne.fromJson(JSON.stringify(a));t(l)}}catch(l){console.error("Failed to initialize profile:",l)}finally{s(!1)}})()},[a,t,s]),null};export{yt as default};
